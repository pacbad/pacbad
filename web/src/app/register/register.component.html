
<chargement-mask *ngIf="loading"></chargement-mask>

<div class="container-fluid text-center">
  <div class="row content">
    <div class="col-xs-16 col-sm-6 col-sm-offset-3">
        <h2>Création de compte</h2>
        <form name="form" (ngSubmit)="f.form.valid && register()" #f="ngForm" novalidate class="form-horizontal">
            <fieldset>
              <legend>Informations du compte</legend>
              <div class="form-group" [ngClass]="{ 'has-error': f.submitted && !identifiant.valid }">
                  <label for="identifiant" class="col-sm-6 control-label">Identifiant</label>
                  <div class="col-sm-6 col-xs-12 input-group">
                    <input type="text" class="form-control" name="identifiant" placeholder="Identifiant" [(ngModel)]="user.identifiant" #identifiant="ngModel" required #txtIdentifiant />
                  </div>
                  <div *ngIf="f.submitted && !identifiant.valid" class="help-block">L'identifiant est obligatoire</div>
              </div>
              <div class="form-group" [ngClass]="{ 'has-error': f.submitted && !password.valid }">
                  <label for="password" class="col-sm-6 control-label">Mot de passe</label>
                  <div class="col-sm-6 col-xs-12 input-group">
                    <input type="password" class="form-control" name="password" placeholder="Mot de passe" [(ngModel)]="user.password" #password="ngModel" required />
                  </div>
                  <div *ngIf="f.submitted && !password.valid" class="help-block">Le mot de passe est obligatoire</div>
              </div>
              <div class="form-group" [ngClass]="{ 'has-error': f.submitted && !passwordRepeat.valid }">
                  <label for="passwordRepeat" class="col-sm-6 control-label">Répétez le mot de passe</label>
                  <div class="col-sm-6 col-xs-12 input-group">
                    <input type="password" class="form-control" name="passwordRepeat" placeholder="Répétez le mot de passe" [(ngModel)]="user.passwordRepeat" #passwordRepeat="ngModel" required />
                  </div>
                  <div *ngIf="f.submitted && !passwordRepeat.valid" class="help-block">Le mot de passe est obligatoire</div>
              </div>
              <div class="form-group" [ngClass]="{ 'has-error': f.submitted && !mail.valid }">
                  <label for="mail" class="col-sm-6 control-label">E-mail</label>
                  <div class="col-sm-6 col-xs-12 input-group">
                    <input type="email" class="form-control" name="mail" placeholder="E-mail" [(ngModel)]="user.mail" #mail="ngModel" required pattern="^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,6})+$" />
                  </div>
                  <div *ngIf="f.submitted && !mail.valid" class="help-block">L'email est obligatoire</div>
              </div>
            </fieldset>
            <fieldset>
              <legend>Informations FFBaD</legend>
              <div class="form-group" [ngClass]="{ 'has-error': f.submitted && !licence.valid }">
                  <label for="licence" class="col-sm-6 control-label">Licence</label>
                  <div class="col-sm-6 col-xs-12 input-group">
                    <input type="number" max="99999999" class="form-control" name="licence" placeholder="Licence" [(ngModel)]="user.licence" #licence="ngModel" required #txtLicence />
                    <div class="input-group-btn">
                      <!-- Buttons -->
                      <button class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="glyphicon glyphicon-question-sign"></span></button>
                      <ul class="dropdown-menu dropdown-menu-right">
                        <li><a href="http://verybad.fr" target="_blank">Retrouver mon numéro de licence</a></li>
                      </ul>
                    </div>
                  </div>
                  <div *ngIf="f.submitted && !licence.valid" class="help-block">La licence est obligatoire</div>
              </div>
              <div class="form-group" [ngClass]="{ 'has-error': f.submitted && !dateNaissance.valid }">
                  <label for="dateNaissance" class="col-sm-6 control-label">Date de naissance</label>
                  <div class="col-sm-6 col-xs-12 input-group">
                    <input type="date" class="form-control" name="dateNaissance" placeholder="Date de naissance" [(ngModel)]="user.dateNaissance" #dateNaissance="ngModel" required />
                  </div>
                  <div *ngIf="f.submitted && !dateNaissance.valid" class="help-block">La date de naissance est obligatoire</div>
              </div>
            </fieldset>
            <div class="form-group has-error" *ngIf="error">
                <div class="help-block">{{error}}</div>
            </div>
            <div class="form-group">
              <button type="button" routerLink="/" class="btn btn-secondary">Retour</button> &nbsp;
              <button type="submit" [disabled]="loading" class="btn btn-primary">Valider</button>
            </div>
        </form>
    </div>
  </div>
</div>


