
<chargement-ecran *ngIf="!ready"></chargement-ecran>

<chargement-mask *ngIf="loading"></chargement-mask>

<div class="container-fluid text-center" *ngIf="ready">
  <div class="row content">
    <div class="col-xs-16 col-sm-6 col-sm-offset-3">
        <h2>Bonjour {{user.prenom}}</h2>
        <p class="compte-cree-le">Compté créé le {{user.dateCreation | date:'dd/MM/y'}}</p>
        <form name="form" (ngSubmit)="f.form.valid && update()" #f="ngForm" novalidate class="form-horizontal">
            <fieldset>
              <legend>Informations du compte</legend>
              <div class="form-group">
                  <label for="identifiant" class="col-sm-6 control-label">Identifiant</label>
                  <div class="col-sm-6 col-xs-12 input-group">
                    <input type="text" class="form-control" name="identifiant" placeholder="Identifiant" [(ngModel)]="user.identifiant" #identifiant="ngModel" disabled />
                  </div>
              </div>
              <div class="form-group" [ngClass]="{ 'has-error': f.submitted && !ancienPassword.valid }">
                  <label for="ancienPassword" class="col-sm-6 control-label">Ancien mot de passe</label>
                  <div class="col-sm-6 col-xs-12 input-group">
                    <input type="password" class="form-control" name="ancienPassword" placeholder="Ancien mot de passe" [(ngModel)]="user.ancienPassword" #ancienPassword="ngModel" />
                  </div>
              </div>
              <div class="form-group" [ngClass]="{ 'has-error': f.submitted && !password.valid }">
                  <label for="password" class="col-sm-6 control-label">Nouveau mot de passe</label>
                  <div class="col-sm-6 col-xs-12 input-group">
                    <input type="password" class="form-control" name="password" placeholder="Nouveau mot de passe" [(ngModel)]="user.password" #password="ngModel" />
                  </div>
              </div>
              <div class="form-group" [ngClass]="{ 'has-error': f.submitted && !passwordRepeat.valid }">
                  <label for="passwordRepeat" class="col-sm-6 control-label">Répétez le mot de passe</label>
                  <div class="col-sm-6 col-xs-12 input-group">
                    <input type="password" class="form-control" name="passwordRepeat" placeholder="Répétez le mot de passe" [(ngModel)]="user.passwordRepeat" #passwordRepeat="ngModel" />
                  </div>
              </div>
              <div class="form-group" [ngClass]="{ 'has-error': f.submitted && !mail.valid }">
                  <label for="mail" class="col-sm-6 control-label">E-mail</label>
                  <div class="col-sm-6 col-xs-12 input-group">
                    <input type="email" class="form-control" name="mail" placeholder="E-mail" [(ngModel)]="user.mail" #mail="ngModel" required pattern="^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,6})+$" />
                  </div>
                  <div *ngIf="f.submitted && !mail.valid" class="help-block">L'email est obligatoire</div>
              </div>
            </fieldset>
            <fieldset>
              <legend>Informations FFBaD</legend>
              <div class="form-group">
                  <label for="licence" class="col-sm-6 control-label">Licence</label>
                  <div class="col-sm-6 col-xs-12 input-group">
                    <input type="number" class="form-control" name="licence" placeholder="Licence" [(ngModel)]="user.licence" disabled />
                  </div>
              </div>
              <div class="form-group">
                  <label for="nom" class="col-sm-6 control-label">Nom</label>
                  <div class="col-sm-6 col-xs-12 input-group">
                    <input type="text" class="form-control" name="nom" placeholder="Nom" [(ngModel)]="user.nom" disabled />
                  </div>
              </div>
              <div class="form-group">
                  <label for="prenom" class="col-sm-6 control-label">Prénom</label>
                  <div class="col-sm-6 col-xs-12 input-group">
                    <input type="text" class="form-control" name="prenom" placeholder="Prénom" [(ngModel)]="user.prenom" disabled />
                  </div>
              </div>
            </fieldset>
            <div class="form-group has-error" *ngIf="error">
                <div class="help-block">{{error}}</div>
            </div>
            <div class="form-group has-success" *ngIf="information">
                <div class="help-block">{{information}}</div>
            </div>
            <div class="form-group">
              <button type="button" routerLink="/" class="btn btn-secondary">Retour</button> &nbsp;
              <button type="submit" [disabled]="loading" class="btn btn-primary">Mettre à jour</button>
            </div>
        </form>
    </div>
  </div>
</div>


